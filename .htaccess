RewriteEngine On

# 1) Redirect direct requests for .html to extensionless URLs
RewriteCond %{THE_REQUEST} \s/([^.]+)\.html[\s?] [NC]
RewriteRule ^ %1 [R=301,L]

# 2) If a URL ends with a trailing slash but a same-named .html exists at docroot,
#    redirect to the extensionless, non-slash form (e.g., /dolle/ -> /dolle)
RewriteCond %{REQUEST_URI} ^/([A-Za-z0-9_-]+)/$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^ %1 [R=301,L]

# 3) Serve real files and directories as-is (assets, images, etc.)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 4) Internally rewrite extensionless, single-segment URLs to their .html counterparts
#    Only match a single path segment with no dot to avoid catching assets like /dolle/back.png
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([A-Za-z0-9_-]+)$ $1.html [L]


